<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Вспомнить где Вован</title>
<meta name="description" content="Узнай, не отвлечешь ли ты Вову от работы, когда будешь набирать ему следующий раз!">
<meta name="author" content="Roman">
<link rel="stylesheet" href="css/animate.min.css">
<link rel="stylesheet" href="css/buttons.css">
<link rel="stylesheet" href="css/showcase.css">
<link href="css/font-awesome.min.css" rel="stylesheet">
</head>
<body>

<script type="text/javascript">
var workOffset = 190800000;
var cycleMS = 4*24*60*60*1000;
var vovanStatus;
var hoursSinceCycleStart;

var remHours;
var remMinutes;
var remSeconds;


function getRemainingTime(){
	var dtmp = new Date();
	switch (vovanStatus){
    	case 1:
        remHours = 11-hoursSinceCycleStart;
        break;
        case 2:
        remHours = 35-hoursSinceCycleStart;
        break;
        case 3:
        remHours = 47-hoursSinceCycleStart;
        break;
        case 4:
        remHours = 95-hoursSinceCycleStart;
        break;
    }
    remHours = Math.floor(remHours);
    remMinutes = 59 - dtmp.getMinutes();
    remSeconds = 59 - dtmp.getSeconds();
}

function getVovanStatus(){
	hoursSinceCycleStart = (((new Date()) - workOffset)%cycleMS)/1000/60/60;
    if(hoursSinceCycleStart<12){
    vovanStatus = 1;
    }
    else {
    	if(hoursSinceCycleStart>12 && hoursSinceCycleStart<36){
    	vovanStatus = 2;
    	}
        else {
        	if(hoursSinceCycleStart>36 && hoursSinceCycleStart < 48){ 
            vovanStatus = 3;
            }
            else {
            	vovanStatus = 4;
            }
        }
    }
    
}

function showVovanStatus(){
	var title = document.getElementById('vovanStat');
    var subTitle = document.getElementById('vovanStatComment');
    var getTimeButton = document.getElementById('timeButton');
	switch(vovanStatus) {
    	case 1:
        title.style.color = "red";
        title.innerHTML = "Вован сейчас на работе";
        subTitle.innerHTML = "и у него -100% зарплаты";
        getTimeButton.classList.remove("button-caution");
        getTimeButton.classList.add("button-action");
        getTimeButton.innerHTML="Узнай, когда вован работизируется ( ︶︿︶)";
        break;
        
        case 2:
        title.style.color = "green";
        title.innerHTML = "Вован сейчас не на работе";
        if(hoursSinceCycleStart<34){
        	subTitle.innerHTML = "-100% зарплаты дают о себе знать";
        }
        else {
        	subTitle.innerHTML = "но уже выключает компьютер";
        }
        getTimeButton.classList.remove("button-action");
        getTimeButton.classList.add("button-caution");
        getTimeButton.innerHTML="Узнай, когда вован работизируется ( ︶︿︶)";
        break;
        
        case 3:
        title.style.color = "red";
        title.innerHTML = "Вован сейчас на работе";
        subTitle.innerHTML = "вкалывает как средневековый мужик";
        getTimeButton.classList.remove("button-action");
        getTimeButton.classList.add("button-caution");
        getTimeButton.innerHTML="Узнай, когда вован вернется ( ͡° ͜ʖ ͡°)";
        break;
        
        
        case 4:
        title.style.color = "green";
        title.innerHTML = "Вован сейчас не на работе";
        if(hoursSinceCycleStart<72){
        	subTitle.innerHTML = "и пока даже не думает там появляться";
        }
        else {
        	subTitle.innerHTML = "часы уже тревожно тикают";
        }
        getTimeButton.classList.remove("button-caution");
        getTimeButton.classList.add("button-action");
        getTimeButton.innerHTML="Узнай, когда вован работизируется ( ︶︿︶)";
        break;
        
        default:
        title.style.color = "gray";
        title.innerHTML = "Вован сейчас в неопределенном состоянии";
        subtitle.innerHTML = "Возможно, что его не существует в текущей вселенной";
    }
}

function timer(){

 //var d = new Date();
 //var h = 19 - d.getHours();
 //var m = 59 - d.getMinutes();
 //var s = 59 - d.getSeconds();
 getRemainingTime();
 h = remHours;
 m = remMinutes;
 s = remSeconds;
 var obj=document.getElementById('timer_inp');
 //obj.innerHTML--;
 if(vovanStatus==1 || vovanStatus==3){
 	obj.innerHTML="Вован вернется через ";
 }
 else{
 	obj.innerHTML="Вован станет работягой через ";
 }
 
 if(h==0 && m==0 && s==0){alert('Вован вернулся!');setTimeout(function(){},1000);getVovanStatus(); showVovanStatus();}
 else{
 
 if(h!=0) {obj.innerHTML+=h.toString(); if(h==1){ obj.innerHTML+=" час ";} else if((h%10)>1 && (h%10)<5) {obj.innerHTML+=" часа ";} else { obj.innerHTML+=" часов ";}}
 
 if(m!=0) {obj.innerHTML+=m.toString() ; if((m%10)==1){ obj.innerHTML+=" минуту ";} else if((m%10)>1 && (m%10)<5 && (m<11 || m > 14)) {obj.innerHTML+=" минуты ";} else { obj.innerHTML+=" минут ";}}
 
 obj.innerHTML+=s.toString();
 if((s%10)==1){ obj.innerHTML+=" секунду ";} else if((s%10)>1 && (s%10)<5 && (s<11 || s > 14)) {obj.innerHTML+=" секунды ";} else { obj.innerHTML+=" секунд ";}
 
 
 setTimeout(timer,1000);
 }
}

document.addEventListener("DOMContentLoaded", function() {
    getVovanStatus();
    showVovanStatus();
});

//setTimeout(timer,1000);
</script>



<section id="buttons-3d" class="showcase showcase-content background-light">
<header class="l-center">
<h3 class="showcase-title" style="color: #FF0000" id="vovanStat">Вован сейчас на работе</h3>
<h4 class="showcase-sub-title" id="vovanStatComment">и у него -100% зарплаты</h4>
<button type="button"
onclick="setTimeout(timer,0);" class="button button-action button-jumbo" id="timeButton">Узнай, когда вован вернется ( ͡° ͜ʖ ͡°)</button>

<p id="demo" class="showcase-sub-title"><div id="timer_inp"></div></p>
</header>

</section>

</body>
</html> 